
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Setting up your computer environment for working with COS data &#8212; HST Notebooks</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/table.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/main.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Downloading COS Data" href="../DataDl/DataDl.html" />
    <link rel="prev" title="COS Notebooks" href="../README.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">HST Notebooks</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    STScI Notebook Repository Template
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  COS
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../README.html">
   COS Notebooks
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Setting up your computer environment for working with COS data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DataDl/DataDl.html">
   Downloading COS Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ViewData/ViewData.html">
   Viewing COS Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../AsnFile/AsnFile.html">
   Modifying or Creating an Association File
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CalCOS/CalCOS.html">
   Running the COS Data Pipeline (
   <code class="docutils literal notranslate">
    <span class="pre">
     CalCOS
    </span>
   </code>
   )
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../SplitTag/SplitTag.html">
   Splitting COS Exposures into sub-exposures with
   <code class="docutils literal notranslate">
    <span class="pre">
     splittag
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../DayNight/DayNight.html">
   Filtering out COS Data taken during the Day or Night
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../LSF/LSF.html">
   Working with the COS Line Spread Function (LSF)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Extract/Extract.html">
   Editing the extraction boxes in a spectral extraction file (XTRACTAB)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  DrizzlePac
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/README.html">
   DrizzlePac Jupyter Notebook Tutorials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/Initialization/Initialization.html">
   DrizzlePac Initialization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/align_to_catalogs/align_to_catalogs.html">
   Aligning HST images to an absolute reference catalog
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/align_multiple_visits/align_multiple_visits.html">
   Optimizing Image Alignment for Multiple HST Visits
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/align_sparse_fields/align_sparse_fields.html">
   Aligning Deep Exposures of Sparse Fields
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/drizzle_wfpc2/drizzle_wfpc2.html">
   Drizzling WFPC2 Images to use a Single Zeropoint
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/mask_satellite/mask_satellite.html">
   Satellite Trail Masking Techniques
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/optimize_image_sampling/optimize_image_sampling.html">
   Optimizing the Image Sampling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../DrizzlePac/using_updated_astrometry_solutions/using_updated_astrometry_solutions.html">
   Using updated astrometry solutions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  NICMOS
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../NICMOS/nicmos_unit_conversion/nicmos_unit_conversion.html">
   Programmatic Replacements for NICMOS Units Conversion Form
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/therealzoidberg/hst_merge/main?urlpath=tree/notebooks/COS/Setup/Setup.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
      <li>
        <a href="https://colab.research.google.com/github/therealzoidberg/hst_merge/blob/main/notebooks/COS/Setup/Setup.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Colab"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../../../_static/images/logo_colab.png">
  </span>
<span class="headerbtn__text-container">Colab</span>
</a>

      </li>
      
      <li>
        
<button onclick="initThebeSBT()"
  class="headerbtn headerbtn-launch-thebe"
  data-toggle="tooltip"
data-placement="left"
title="Launch Thebe"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="headerbtn__text-container">Live Code</span>
</button>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="github.com/therealzoidberg/hst_merge"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="github.com/therealzoidberg/hst_merge/issues/new?title=Issue%20on%20page%20%2Fnotebooks/COS/Setup/Setup.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/notebooks/COS/Setup/Setup.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Setting up your computer environment for working with COS data
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-goals">
   Learning Goals
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   0. Introduction
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#notes-for-those-new-to-python-jupyter-coding">
     Notes for those new to Python/Jupyter/Coding:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-notes">
     Other notes:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-a-conda-environment-for-working-with-cos-data">
   1. Setting up a
   <code class="docutils literal notranslate">
    <span class="pre">
     conda
    </span>
   </code>
   environment for working with COS data
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installing-conda">
     1.1. Installing
     <code class="docutils literal notranslate">
      <span class="pre">
       conda
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-conda-environment">
     1.2. Creating a
     <code class="docutils literal notranslate">
      <span class="pre">
       conda
      </span>
     </code>
     environment
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#testing-our-installation">
       Testing our installation
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#installing-other-packages">
       Installing other packages
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks">
   2. Setting up the git repo of other COS tutorials (
   <em>
    optional for some Notebooks
   </em>
   )
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#downloading-up-to-date-reference-files-recommended-for-running-calcos">
   3. Downloading up-to-date reference files (
   <em>
    recommended for running
    <code class="docutils literal notranslate">
     <span class="pre">
      CalCOS
     </span>
    </code>
   </em>
   )
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calcos-and-reference-files">
     <code class="docutils literal notranslate">
      <span class="pre">
       CalCOS
      </span>
     </code>
     and reference files
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reference-file-contexts">
     Reference file
     <strong>
      contexts
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#downloading-the-most-recent-context">
     3.1. Downloading the most recent context
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fig-3-1">
       Fig 3.1
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fig-3-2">
       Fig 3.2
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fig-3-3">
       Fig 3.3
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-crds-command-line-tool">
       The CRDS Command line tool
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#downloading-an-older-context">
     3.2. Downloading an older context
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#congratulations-you-finished-this-notebook">
     Congratulations! You finished this Notebook!
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">
       There are more COS data walkthrough Notebooks on different topics. You can find them here.
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#about-this-notebook">
     About this Notebook
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Setting up your computer environment for working with COS data</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Setting up your computer environment for working with COS data
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-goals">
   Learning Goals
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   0. Introduction
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#notes-for-those-new-to-python-jupyter-coding">
     Notes for those new to Python/Jupyter/Coding:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-notes">
     Other notes:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-a-conda-environment-for-working-with-cos-data">
   1. Setting up a
   <code class="docutils literal notranslate">
    <span class="pre">
     conda
    </span>
   </code>
   environment for working with COS data
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installing-conda">
     1.1. Installing
     <code class="docutils literal notranslate">
      <span class="pre">
       conda
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#creating-a-conda-environment">
     1.2. Creating a
     <code class="docutils literal notranslate">
      <span class="pre">
       conda
      </span>
     </code>
     environment
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#testing-our-installation">
       Testing our installation
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#installing-other-packages">
       Installing other packages
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks">
   2. Setting up the git repo of other COS tutorials (
   <em>
    optional for some Notebooks
   </em>
   )
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#downloading-up-to-date-reference-files-recommended-for-running-calcos">
   3. Downloading up-to-date reference files (
   <em>
    recommended for running
    <code class="docutils literal notranslate">
     <span class="pre">
      CalCOS
     </span>
    </code>
   </em>
   )
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calcos-and-reference-files">
     <code class="docutils literal notranslate">
      <span class="pre">
       CalCOS
      </span>
     </code>
     and reference files
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reference-file-contexts">
     Reference file
     <strong>
      contexts
     </strong>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#downloading-the-most-recent-context">
     3.1. Downloading the most recent context
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fig-3-1">
       Fig 3.1
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fig-3-2">
       Fig 3.2
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fig-3-3">
       Fig 3.3
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-crds-command-line-tool">
       The CRDS Command line tool
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#downloading-an-older-context">
     3.2. Downloading an older context
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#congratulations-you-finished-this-notebook">
     Congratulations! You finished this Notebook!
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">
       There are more COS data walkthrough Notebooks on different topics. You can find them here.
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#about-this-notebook">
     About this Notebook
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <p><a id="topS"></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="setting-up-your-computer-environment-for-working-with-cos-data">
<h1>Setting up your computer environment for working with COS data<a class="headerlink" href="#setting-up-your-computer-environment-for-working-with-cos-data" title="Permalink to this headline">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="learning-goals">
<h1>Learning Goals<a class="headerlink" href="#learning-goals" title="Permalink to this headline">#</a></h1>
<p><font size="4"> This Notebook is designed to walk the user (<em>you</em>) through: </font></p>
<p><strong>1. <a class="reference external" href="#setupEnvS">Setting up a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment for working with COS data</a></strong></p>
<p>- 1.1. <a class="reference external" href="#installcondaS">Installing <code class="docutils literal notranslate"><span class="pre">conda</span></code></a></p>
<p>- 1.2. <a class="reference external" href="#createenvS">Creating a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment</a></p>
<p><strong>2. <a class="reference external" href="#tutS">Setting up the git repo of COS tutorials</a></strong> (<em>optional</em>)</p>
<p><strong>3. <a class="reference external" href="#crdsS">Downloading up-to-date reference files</a></strong></p>
<p>- 3.1. <a class="reference external" href="#newcC">Downloading the most recent context</a></p>
<p>- 3.2. <a class="reference external" href="#oldcC">Downloading an older context</a></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="introduction">
<h1>0. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h1>
<p><strong>The Cosmic Origins Spectrograph (<a class="reference external" href="https://www.nasa.gov/content/hubble-space-telescope-cosmic-origins-spectrograph"><em>COS</em></a>) is an ultraviolet spectrograph on-board the Hubble Space Telescope (<a class="reference external" href="https://www.stsci.edu/hst/about"><em>HST</em></a>) with capabilities in the near ultraviolet (<em>NUV</em>) and far ultraviolet (<em>FUV</em>).</strong></p>
<p><strong>This tutorial will walk you through setting up a Python environment for COS data analysis on your computer.</strong></p>
<ul class="simple">
<li><p>For an in-depth manual to working with COS data and a discussion of caveats and user tips, see the <a class="reference external" href="https://hst-docs.stsci.edu/display/COSDHB/">COS Data Handbook</a>.</p></li>
<li><p>For a detailed overview of the COS instrument, see the <a class="reference external" href="https://hst-docs.stsci.edu/display/COSIHB/">COS Instrument Handbook</a>.</p></li>
</ul>
<section id="notes-for-those-new-to-python-jupyter-coding">
<h2>Notes for those new to Python/Jupyter/Coding:<a class="headerlink" href="#notes-for-those-new-to-python-jupyter-coding" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>You will frequently see exclamation points (<strong>!</strong>) or dollar signs (<strong>$</strong>) at the beginning of a line of code. These are not part of the actual commands. The exclamation points tell a jupyter Notebook to pass the following line to the command line, and the dollar sign merely indicates the start of a terminal prompt.</p></li>
<li><p>Similarly, when a variable or argument in a line of code is surrounded by sharp brackets, like &lt;these words are&gt;, this is an indication that the variable or argument is something which you should change to suit your data.</p></li>
<li><p>If you install the full Anaconda distribution with the <a class="reference external" href="https://docs.anaconda.com/anaconda/navigator/"><em>Anaconda Navigator</em> tool</a>, (see Section 1,) you will also have access to a graphical interface (AKA a way to use windows and a point-and-click interface instead of the terminal for installing packages and managing environments).</p></li>
</ul>
</section>
<section id="other-notes">
<h2>Other notes:<a class="headerlink" href="#other-notes" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>It is sometimes preferable to use another package manager - <code class="docutils literal notranslate"><span class="pre">pip</span></code> - to install necessary packages, however <code class="docutils literal notranslate"><span class="pre">conda</span></code> can be used to create Python environments as well as install packages. You may see both <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">conda</span></code> used in these Notebooks.</p></li>
</ul>
<p><a id = setupEnvS></a></p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setting-up-a-conda-environment-for-working-with-cos-data">
<h1>1. Setting up a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment for working with COS data<a class="headerlink" href="#setting-up-a-conda-environment-for-working-with-cos-data" title="Permalink to this headline">#</a></h1>
<p><a id = installcondaS></a></p>
<section id="installing-conda">
<h2>1.1. Installing <code class="docutils literal notranslate"><span class="pre">conda</span></code><a class="headerlink" href="#installing-conda" title="Permalink to this headline">#</a></h2>
<p>You may already have a working <code class="docutils literal notranslate"><span class="pre">conda</span></code> tool. To check whether you have <code class="docutils literal notranslate"><span class="pre">conda</span></code> installed, open a terminal window and type <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">-V</span></code>, or run the next cell. If your <code class="docutils literal notranslate"><span class="pre">conda</span></code> is installed and working, the terminal or cell will return the version of conda.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span><span class="w"> </span>conda<span class="w"> </span>-V
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>conda 23.1.0
</pre></div>
</div>
</div>
</div>
<p>If you receive a message that the command is unknown or not found, you must install conda. We recommend installing either the Anaconda or Minicoda distributions. See <a class="reference external" href="https://astroconda.readthedocs.io/en/latest/getting_started.html#getting-started-jump">this page</a> for instructions, and install either of the following:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Conda Distribution (with link to download)</p></th>
<th class="head"><p>Short Description</p></th>
<th class="head"><p>Size</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.anaconda.com/anaconda/install/"><code class="docutils literal notranslate"><span class="pre">anaconda</span></code> Distribution</a></p></td>
<td><p>More beginner friendly, with lots of extras you likely won’t use</p></td>
<td><p>~ 3 GB</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html"><code class="docutils literal notranslate"><span class="pre">miniconda</span></code> Distribution</a></p></td>
<td><p>Bare-bones <code class="docutils literal notranslate"><span class="pre">conda</span></code> distribution, which allows you to download only what you need</p></td>
<td><p>~ 400 MB</p></td>
</tr>
</tbody>
</table>
<p><a id = createenvS></a></p>
</section>
<section id="creating-a-conda-environment">
<h2>1.2. Creating a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment<a class="headerlink" href="#creating-a-conda-environment" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">conda</span></code> allows for separate sets of packages to be installed on the same system in different environments, and for these environments to be shared so that other users can install the packages you used to get your code running. These packages are vital parts of your programming toolkit, and allow you to avoid “reinventing the wheel” by leveraging other peoples’ code. Thus, packages should be treated as any resource created by other person, and cited to avoid plagiarizing.</p>
<p>One package which is often necessary for working with COS data is <code class="docutils literal notranslate"><span class="pre">calcos</span></code>, which runs the <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-3-cos-calibration/3-2-pipeline-processing-overview">CalCOS data pipeline</a>. However, this package will not, by default, be installed on your computer. We will install CalCOS, as well as all the packages you will need to run any of these COS Notebooks.</p>
<p>Open your terminal app, likely <code class="docutils literal notranslate"><span class="pre">Terminal</span></code> or <code class="docutils literal notranslate"><span class="pre">iTerm</span></code> on a Mac or <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">Terminal</span></code> or <code class="docutils literal notranslate"><span class="pre">Powershell</span></code> on Windows. We’ll begin by adding the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel to <code class="docutils literal notranslate"><span class="pre">conda</span></code>’s channel list. This enables <code class="docutils literal notranslate"><span class="pre">conda</span></code> to look in the right place to find all the packages we want to install.</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--add</span> <span class="pre">channels</span> <span class="pre">conda-forge</span></code></p>
<p>Now we can create our new environment. We’ll call it <code class="docutils literal notranslate"><span class="pre">cos_analysis_env</span></code>, and initialize it with python version 3.10 and several packages we’ll need.</p>
<!-- Substitute for working astroconda - This will revert to using astroconda once the astroconda software is updated  -->
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">conda</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">cos_analysis_env</span> <span class="pre">python=3.10</span> <span class="pre">notebook</span> <span class="pre">jupyterlab</span> <span class="pre">numpy</span> <span class="pre">astropy</span> <span class="pre">matplotlib</span> <span class="pre">astroquery</span></code></p>
<p>Allow <code class="docutils literal notranslate"><span class="pre">conda</span></code> to install the packages (when prompted, type <code class="docutils literal notranslate"><span class="pre">y</span></code> then enter/return). Then, <code class="docutils literal notranslate"><span class="pre">conda</span></code> will need a few minutes, depending on your internet speed, to install the packages. After this installation finishes, you can see all of your environments with:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">conda</span> <span class="pre">env</span> <span class="pre">list</span></code></p>
<p>Now, activate your new environment with:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">cos_analysis_env</span></code></p>
<p><em>Note</em> that you will need to activate your environment every time you open a new terminal or shell. You can do this automatically by appending <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">cos_analysis_env</span></code> to the end of your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> or equivalent file. You must activate your desired <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment <em>before</em> starting a Jupyter Notebook kernel in that terminal.</p>
<p>Finally, install the <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code>, <code class="docutils literal notranslate"><span class="pre">COSTools</span></code>, and <code class="docutils literal notranslate"><span class="pre">CRDS</span></code> packages using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">calcos</span> <span class="pre">costools</span> <span class="pre">crds</span></code></p>
<section id="testing-our-installation">
<h3>Testing our installation<a class="headerlink" href="#testing-our-installation" title="Permalink to this headline">#</a></h3>
<p>We can test our installation by importing some of these packages. From the command line, try running:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">python</span> <span class="pre">--version;</span> <span class="pre">python</span> <span class="pre">-c</span> <span class="pre">&quot;import</span>&#160; <span class="pre">numpy,</span> <span class="pre">calcos;</span> <span class="pre">print('Imports</span> <span class="pre">succesful')&quot;</span></code></p>
<p>This should return:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Python</span> <span class="mf">3.10.4</span>    <span class="c1">#(or a similar version number)</span>
<span class="n">Imports</span> <span class="n">successful</span>
</pre></div>
</div>
</section>
<section id="installing-other-packages">
<h3>Installing other packages<a class="headerlink" href="#installing-other-packages" title="Permalink to this headline">#</a></h3>
<p>We can add any other packages we need with this command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&lt;first</span> <span class="pre">package</span> <span class="pre">name&gt;</span> <span class="pre">&lt;second</span> <span class="pre">package</span> <span class="pre">name&gt;</span> <span class="pre">...</span> <span class="pre">&lt;last</span> <span class="pre">package</span> <span class="pre">name&gt;</span></code></p>
<p>Now, go ahead and install the <a class="reference external" href="https://specutils.readthedocs.io/en/stable/"><code class="docutils literal notranslate"><span class="pre">specutils</span></code> package</a>, which is briefly discussed in the ViewData.ipynb Notebook, using the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">specutils</span></code></p>
<p><a id = tutS></a></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks">
<h1>2. Setting up the git repo of other COS tutorials (<em>optional for some Notebooks</em>)<a class="headerlink" href="#setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks" title="Permalink to this headline">#</a></h1>
<p>While most of the tutorial Notebooks can generally be downloaded and run independently, this is not true at present for <strong>ViewData.ipynb</strong>, which needs both the Scripts and ViewData directories installed side-by-side.
For the best experience, we recommend cloning the entire repository of Notebooks.</p>
<p>You almost certainly have the <code class="docutils literal notranslate"><span class="pre">git</span></code> command line tool installed. To test it, type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">--version</span></code> into the command line, which should respond with a version number. If you don’t have git installed, follow the instructions to install it <a class="reference external" href="https://www.atlassian.com/git/tutorials/install-git">here</a>.</p>
<p>All of the tutorial Notebooks are hosted at this <a class="reference external" href="http://github.com/spacetelescope/notebooks/">GitHub repo</a>.</p>
<p>Clicking on the green “Code” button on this GitHub page gives you several options for downloading the code. Copy either the <code class="docutils literal notranslate"><span class="pre">https</span></code> or <code class="docutils literal notranslate"><span class="pre">ssh</span></code> text under the <code class="docutils literal notranslate"><span class="pre">Clone</span></code> heading, then type into your command line:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">git</span> <span class="pre">clone</span> <span class="pre">&lt;the</span> <span class="pre">text</span> <span class="pre">you</span> <span class="pre">copied&gt;</span></code> without the &lt;&gt;.</p>
<p><a id = crdsS></a></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="downloading-up-to-date-reference-files-recommended-for-running-calcos">
<h1>3. Downloading up-to-date reference files (<em>recommended for running <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code></em>)<a class="headerlink" href="#downloading-up-to-date-reference-files-recommended-for-running-calcos" title="Permalink to this headline">#</a></h1>
<p><strong>This step is suggested if you intend to process or re-process COS data using the <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-3-cos-calibration">COS calibration pipeline: <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code></a>.</strong></p>
<section id="calcos-and-reference-files">
<h2><code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> and reference files<a class="headerlink" href="#calcos-and-reference-files" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> pipeline processes science data obtained with the COS instrument using a set of reference files, such as:</p>
<ul class="simple">
<li><p><strong>Bad pixel tables</strong> to subtract off bad pixels</p></li>
<li><p><strong>Flat field files</strong> to flat-field a spectrum <em>pixel-by-pixel</em></p></li>
<li><p><strong>Time-dependent sensitivity (TDS) tables</strong> to correct for <a class="reference external" href="https://www.stsci.edu/hst/instrumentation/cos/performance/sensitivity">COS’ long-term loss of sensitivity</a></p></li>
<li><p><strong>Many more</strong> - see <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-3-cos-calibration/3-4-descriptions-of-spectroscopic-calibration-steps">COS Data Handbook Section 3.4</a></p></li>
</ul>
<p>These reference files are regularly updated by the COS team to provide the best possible calibration. The current and prior files are all hosted by the <a class="reference external" href="https://hst-crds.stsci.edu">HST Calibration Reference Data System (CRDS)</a>. To get the most up-to-date COS reference files, you can use the <code class="docutils literal notranslate"><span class="pre">crds</span></code> command line tool which we installed in <a class="reference external" href="#setupEnvS">Section 1</a> of this Notebook.</p>
<p><strong>Because some of these files are quite large, it is <em>highly recommended</em> you create a cache on your computer of all the COS files, which you may then update as necessary. We’ll explain how to set up that cache below.</strong></p>
<!-- Alternatives for downloading *just the reference files you need at that moment* are offered in the walkthrough Notebooks which pertain to running the pipeline, i.e. ["Calcos.ipynb"](https://github.com/spacetelescope/notebooks/blob/master/notebooks/COS/CalCOS/CalCOS.ipynb). --></section>
<section id="reference-file-contexts">
<h2>Reference file <strong>contexts</strong><a class="headerlink" href="#reference-file-contexts" title="Permalink to this headline">#</a></h2>
<p><strong>First we must briefly explain “contexts”:</strong>
The history of reference files is stored in <strong>context files</strong>, which list the most up-to-date reference files at their time of creation.</p>
<ul class="simple">
<li><p>If you wish to calibrate your data with the newest files provided by the COS team, (<em>which is highly likely,</em>) you should download and use the files indicated by the current COS instrument context file (called an <code class="docutils literal notranslate"><span class="pre">imap</span></code> file). To download the files listed in the current context, see <a class="reference external" href="#newcC">Section 3.1</a>.</p></li>
<li><p>However, there are circumstances in which you may wish to use an older context, such as when you are trying to recreate the exact steps taken by another researcher. For this, see <a class="reference external" href="#oldcC">Section 3.2</a>.</p></li>
<li><p>Finally, you may wish to tweak the individual reference files used, such that they don’t correspond to any particular instrument context. This is discussed in our <a class="reference external" href="https://github.com/spacetelescope/notebooks/blob/master/notebooks/COS/CalCOS/CalCOS.ipynb">notebook on running the <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> pipeline</a>.</p></li>
</ul>
<p><a id = newcC></a></p>
</section>
<section id="downloading-the-most-recent-context">
<h2>3.1. Downloading the most recent context<a class="headerlink" href="#downloading-the-most-recent-context" title="Permalink to this headline">#</a></h2>
<p>First, we will check the CRDS website to determine what the current context is, as it changes regularly. In your browser, navigate to <a class="reference external" href="https://hst-crds.stsci.edu">the HST CRDS homepage</a>, and you will see a page as in Fig. 3.1:</p>
<section id="fig-3-1">
<h3>Fig 3.1<a class="headerlink" href="#fig-3-1" title="Permalink to this headline">#</a></h3>
<center><img src=./figures/crds1.png width ="900" title="CRDS Homepage"> </center>
<p>At the bottom of this page is a list of recent contexts, titled “Context History”. Clicking the context listed with the Status “Operational” (circled in red in the figure) will take you to that context’s page, as shown in Fig. 3.2:</p>
</section>
<section id="fig-3-2">
<h3>Fig 3.2<a class="headerlink" href="#fig-3-2" title="Permalink to this headline">#</a></h3>
<center><img src=./figures/crds2.png width ="900" title="CRDS current 'Historical References' context page"> </center>
<p>By clicking the “cos” tab, (circled in red), you will be open up the tab, showing a page similar to Fig. 3.3, where you can find the current cos instrument context file: <code class="docutils literal notranslate"><span class="pre">hst_cos_&lt;context</span> <span class="pre">number&gt;.imap</span></code>. This filename is circled in red in Fig. 3.3.</p>
</section>
<section id="fig-3-3">
<h3>Fig 3.3<a class="headerlink" href="#fig-3-3" title="Permalink to this headline">#</a></h3>
<center><img src=./figures/crds3.png width ="900" title="Current COS context on the CRDS site"> </center>
<p>Note down or copy the filename you just found.</p>
</section>
<section id="the-crds-command-line-tool">
<h3>The CRDS Command line tool<a class="headerlink" href="#the-crds-command-line-tool" title="Permalink to this headline">#</a></h3>
<p>Now we can use the CRDS command line tool to download all the files in this context. Remember to first activate the <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment you created in Section 1, or you may not have the necessary <code class="docutils literal notranslate"><span class="pre">crds</span></code> package installed.</p>
<p>From your command line, we must now set several environment variables. First, tell the crds command line tool where to go looking for the reference files online:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">export</span> <span class="pre">CRDS_SERVER_URL=https://hst-crds.stsci.edu</span></code></p>
<p>Next, tell it where to save the files on your computer. As long as you are consistent, this can be wherever you like:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">export</span> <span class="pre">CRDS_PATH=${HOME}/crds_cache</span></code></p>
<p>Now we can run the initial command to sync all the files we might need. <em>This may take from a few minutes to several hours, depending on your internet connection</em>:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">crds</span> <span class="pre">sync</span> <span class="pre">--contexts</span> <span class="pre">hst_cos_&lt;context</span> <span class="pre">number&gt;.imap</span> <span class="pre">--fetch-references</span></code></p>
<p><strong>Well done.</strong> Your reference files are now all downloaded to the cache you set up, in subdirectories for the observatory and instrument they pertain to.
To see the COS reference files you just downloaded:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">ls</span> <span class="pre">${HOME}/crds_cache/references/hst/cos</span> </code></p>
<p>For running CalCOS, we recommend creating an environment variable pointing to this directory called <code class="docutils literal notranslate"><span class="pre">lref</span></code>. If you are using a bash or similar shell, simply add the following export to your .bashrc or equivalent:</p>
<p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">lref='{HOME}/crds_cache/references/hst/cos'</span></code></p>
<p><a id = oldcC></a></p>
</section>
</section>
<section id="downloading-an-older-context">
<h2>3.2. Downloading an older context<a class="headerlink" href="#downloading-an-older-context" title="Permalink to this headline">#</a></h2>
<p><strong>If you know the <code class="docutils literal notranslate"><span class="pre">imap</span></code> context you wish to download files from,</strong> simply run the initial sync command with that context file:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">crds</span> <span class="pre">sync</span> <span class="pre">--contexts</span> <span class="pre">hst_cos_&lt;context</span> <span class="pre">number&gt;.imap</span> <span class="pre">--fetch-references</span></code></p>
<p><strong>If you instead know the observatory-wide pipeline context, (called a <code class="docutils literal notranslate"><span class="pre">pmap</span></code> file,)</strong> you can determine the relevant imap file by going to the <a class="reference external" href="https://hst-crds.stsci.edu/display_context_history/">“more history”</a> or <a class="reference external" href="https://hst-crds.stsci.edu/display_all_contexts/">“all contexts”</a> tabs of the CRDS website.</p>
<p>These pages are accessible either via the links above, or the buttons boxed in blue in Fig. 3.1. Clicking on the <code class="docutils literal notranslate"><span class="pre">pmap</span></code> filename and then on the cos tab will show you the cos imap filename as in Fig. 3.3. You can then run the above <code class="docutils literal notranslate"><span class="pre">crds</span> <span class="pre">sync</span></code> command with this imap file as your context.</p>
<p><strong>Finally, if you instead have a fits file of processed COS data whose context you would like to match,</strong> simply open its fits header to find the <code class="docutils literal notranslate"><span class="pre">CRDS_CTX</span></code> keyword.
The value for this keyword should be a pmap file, which you can search for as in the above case. Then run the above <code class="docutils literal notranslate"><span class="pre">crds</span> <span class="pre">sync</span></code> command with this imap file as your context.</p>
<p>Again, we recommend creating an environment variable pointing to this directory called <code class="docutils literal notranslate"><span class="pre">lref</span></code>. If you are using a bash or similar shell, simply add the following export to your .bashrc:</p>
<p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">lref='{HOME}/crds_cache/references/hst/cos'</span></code></p>
</section>
<section id="congratulations-you-finished-this-notebook">
<h2>Congratulations! You finished this Notebook!<a class="headerlink" href="#congratulations-you-finished-this-notebook" title="Permalink to this headline">#</a></h2>
<section id="there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">
<h3>There are more COS data walkthrough Notebooks on different topics. You can find them <a class="reference external" href="https://spacetelescope.github.io/COS-Notebooks/">here</a>.<a class="headerlink" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here" title="Permalink to this headline">#</a></h3>
</section>
</section>
<hr class="docutils" />
<section id="about-this-notebook">
<h2>About this Notebook<a class="headerlink" href="#about-this-notebook" title="Permalink to this headline">#</a></h2>
<p><strong>Author:</strong> Nat Kerman <a class="reference external" href="mailto:nkerman&#37;&#52;&#48;stsci&#46;edu">mailto:nkerman<span>&#64;</span>stsci<span>&#46;</span>edu</a></p>
<p><strong>Updated On:</strong> 2022-04-26</p>
<blockquote>
<div><p><em>This tutorial was generated to be in compliance with the <a class="reference external" href="https://github.com/spacetelescope/style-guides">STScI style guides</a> and would like to cite the <a class="reference external" href="https://github.com/spacetelescope/style-guides/blob/master/templates/example_notebook.ipynb">Jupyter guide</a> in particular.</em></p>
</div></blockquote>
<p><a class="reference external" href="#topS">Top of Page</a>
<img style="float: right;" src="https://raw.githubusercontent.com/spacetelescope/notebooks/master/assets/stsci_pri_combo_mark_horizonal_white_bkgd.png" alt="Space Telescope Logo" width="200px"/></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "therealzoidberg/hst_merge",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/COS/Setup"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../README.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">COS Notebooks</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../DataDl/DataDl.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Downloading COS Data</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By STScI<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>